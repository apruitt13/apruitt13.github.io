<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drone Education App</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .blocklyFlyoutScrollbar.blocklyScrollbarVertical {
            display: none;
        }

        /* For WebKit browsers (Chrome, Safari) */
        .blocklyFlyoutScrollbar.blocklyScrollbarVertical::-webkit-scrollbar {
            display: none;
        }
        /* Custom styles to ensure Blockly and canvas fill their containers */
        #blocklyDiv, #simulationCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        #blocklyContainer, #simulationContainer {
            height: 60vh; /* Adjust height for better fit */
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            overflow: hidden;
            background-color: #f9fafb;
        }
        /* --- FIX: Create a new stacking context for Blockly --- */
        #blocklyContainer {
            position: relative;
            z-index: 0;
        }
        .scrollable-content {
            height: 100%;
            overflow-y: auto;
        }
    /* Force smaller drone media size */
        #droneMediaWrapper img,
        #droneMediaWrapper video {
            width: 150px !important;
            height: 100px !important;
            object-fit: contain;
            display: block;
        }
        #droneMediaWrapper video {
            margin-bottom: 0 !important;
        }
        table {
        width: 100%;
        border-collapse: collapse;
        font-family: Arial, sans-serif;
        }
        th, td {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }
        th {
            background-color: #f2f2f2;
            color: #333;
        }
        .category-header {
            background-color: #e9e9e9;
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans p-6">

<!-- Navigation Menu -->
    <nav class="bg-white shadow-lg rounded-full px-6 py-3 mb-6 flex justify-center space-x-4">
        <a href="../index.html" class="text-gray-700 font-semibold hover:text-blue-600 transition-colors duration-200">Home</a>
        <a href="../game/python_game.html" class="text-gray-700 font-semibold hover:text-blue-600 transition-colors duration-200">Game</a>
        <div class="relative">
            <button id="lessons-button" class="text-gray-700 font-semibold hover:text-blue-600 transition-colors duration-200 focus:outline-none">
                Drone Basics
            </button>
            <div id="lessons-dropdown" class="absolute hidden bg-white shadow-lg rounded-xl p-2 w-48 mt-2 z-10">
                <a href="../lessons/agriculture.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Agriculture</a>
                <a href="../lessons/construction.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Construction</a>
                <a href="../lessons/realEstate.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Real Estate</a>
                <a href="../lessons/filmMaking.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Filmmaking</a>
                <a href="../lessons/publicSafety.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Public Safety</a>
                <a href="../lessons/surveyingMapping.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Surveying and Mapping</a>
                <a href="../lessons/energyUtilities.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Energy and Utilities</a>
                <a href="../lessons/logisticsDelivery.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Logistics and Delivery</a>
                <a href="../lessons/journalism.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Journalism</a>
                <a href="../lessons/environmentalConservation.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Environmental Conservation</a>
            </div>
        </div>
        <div class="relative">
            <button id="part107-button" class="text-gray-700 font-semibold hover:text-blue-600 transition-colors duration-200 focus:outline-none">
                Part 107 Study Guide
            </button>
            <div id="part107-dropdown" class="absolute hidden bg-white shadow-lg rounded-xl p-2 w-48 mt-2 z-10">
                <a href="part107.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Introduction</a>
                <a href="regulations.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Regulations</a>
                <a href="airspace.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Airspace & Requirements</a>
                <a href="weather.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Weather</a>
                <a href="loading.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Loading & Performance</a>
                <a href="operations.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Operations</a>
            </div>
        </div>
    </nav>

    <!-- Main container for the 3-column layout -->
    <div class="flex flex-col lg:flex-row gap-6">

        <!-- Column 1: Drone Information -->
        <div class="flex-1 bg-white shadow-lg rounded-xl p-6 max-h-[80vh] flex flex-col">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Knowledge Area 1: Regulations (15-25%)</h2>
            <div class="h-full overflow-y-auto">
                <section class="prose max-w-none">
                    <h3 class="text-xl font-semibold mb-2">Section 1: Regulations (15–25%)</h3>
                    <p class="mb-4">The FAA established 14 CFR Part 107 to provide a regulatory framework for civil small Unmanned Aircraft Systems (sUAS) weighing less than 55 lbs (&lt;55 lbs).</p>

                    <h4 class="text-lg font-semibold mt-4 mb-2">Legal Structure of Part 107</h4>
                    <p class="mb-2">The regulations are organized into specific subparts that every pilot must understand to ensure legal compliance:</p>
                    <ul class="list-disc pl-6 space-y-2">
                        <li><strong>Subpart A (General):</strong> Provides the fundamental definitions. An sUAS is defined as the aircraft and its "associated elements," including communication links and control stations required for safe operation.</li>
                        <li><strong>Subpart B (Operating Rules):</strong> The primary rules for flight, covering topics like altitude limits, right-of-way, and speed.</li>
                        <li><strong>Subpart C (Remote Pilot Certification):</strong> Details eligibility, testing, and the requirement to complete recurrent training every 24 calendar months.</li>
                        <li><strong>Subpart D (Operations Over Human Beings):</strong> Describes the four risk-based categories (1–4) for flying over people.</li>
                        <li><strong>Subpart E (Waivers):</strong> Explains how to apply for a Certificate of Waiver to deviate from specific rules if a pilot can prove the operation can be conducted safely using alternative methods.</li>
                    </ul>

                    <h4 class="text-lg font-semibold mt-4 mb-2">Operational Limits and Safety</h4>
                    <ul class="list-disc pl-6 space-y-2">
                        <li><strong>Altitude and Speed:</strong> The maximum altitude is 400 feet AGL. If the sUAS is within a 400-foot radius of a structure, it may fly up to 400 feet above the structure’s uppermost limit. The maximum groundspeed is 100 mph (87 knots).</li>
                        <li><strong>Visual Line of Sight (VLOS):</strong> The Remote PIC, person manipulating the controls, or Visual Observer (VO) must see the aircraft throughout the flight without vision-enhancing devices like binoculars (though corrective lenses are allowed).</li>
                        <li><strong>Accident Reporting:</strong> The RPIC must report an accident to the FAA within 10 calendar days if it results in serious injury, loss of consciousness, or property damage (other than the sUAS) exceeding $500.</li>
                    </ul>

                    <h4 class="text-lg font-semibold mt-4 mb-2">Personnel Requirements</h4>
                    <ul class="list-disc pl-6 space-y-2">
                        <li><strong>Registration:</strong> All sUAS weighing between 0.55 lbs and 55 lbs must be registered ($5 fee, valid for 3 years). Commercial pilots must register each drone individually on FAADroneZone.</li>
                    </ul>

                    <p class="mt-4"><strong>Eligibility:</strong> You must be 16 years old, able to understand English, and in a physical/mental condition that does not interfere with safety.</p>
                </section>
            </div>
        </div>

        <div id="question-section" class="w-full lg:w-96 shrink-0 mt-8 p-4 bg-blue-50 rounded-lg">
            <h3 class="text-lg font-semibold mb-2">Practice Question</h3>
            <div id="question-text" class="mb-4 text-gray-800"></div>
            <div id="answer-section" class="mb-4"></div>
            <div id="explanation-section" class="mb-4 text-green-900"></div>
            <div id="image-section" class="mb-4"></div>
            <button id="next-question" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Next Question</button>
        </div>
    </div>

    <!-- JavaScript logic -->
    <script src="../index.js"></script>
    <script src="regulations.js"></script>

    <script>
    document.getElementById('lessons-button').addEventListener('click', function() {
        document.getElementById('lessons-dropdown').classList.toggle('hidden');
    });

    // Optional: Close the dropdown if the user clicks anywhere else
    document.addEventListener('click', function(event) {
        const dropdown = document.getElementById('lessons-dropdown');
        const button = document.getElementById('lessons-button');

        if (!dropdown.contains(event.target) && !button.contains(event.target)) {
            dropdown.classList.add('hidden');
        }
    });
    document.getElementById('part107-button').addEventListener('click', function() {
        document.getElementById('part107-dropdown').classList.toggle('hidden');
    });

    // Optional: Close the dropdown if the user clicks anywhere else
    document.addEventListener('click', function(event) {
        const dropdown = document.getElementById('part107-dropdown');
        const button = document.getElementById('part107-button');

        if (!dropdown.contains(event.target) && !button.contains(event.target)) {
            dropdown.classList.add('hidden');
        }
    });
    </script>
</body>