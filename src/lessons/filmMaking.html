<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drone Education App</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .blocklyFlyoutScrollbar.blocklyScrollbarVertical {
            display: none;
        }

        /* For WebKit browsers (Chrome, Safari) */
        .blocklyFlyoutScrollbar.blocklyScrollbarVertical::-webkit-scrollbar {
            display: none;
        }
        /* Custom styles to ensure Blockly and canvas fill their containers */
        #blocklyDiv, #simulationCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        #blocklyContainer, #simulationContainer {
            height: 60vh; /* Adjust height for better fit */
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            overflow: hidden;
            background-color: #f9fafb;
        }
        /* --- FIX: Create a new stacking context for Blockly --- */
        #blocklyContainer {
            position: relative;
            z-index: 0;
        }
        .scrollable-content {
            height: 100%;
            overflow-y: auto;
        }
        /* Force smaller drone media size */
        #droneMediaWrapper img,
        #droneMediaWrapper video {
            width: 150px !important;
            height: 100px !important;
            object-fit: contain;
            display: block;
        }
        #droneMediaWrapper video {
            margin-bottom: 0 !important;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans p-6">

    <!-- Navigation Menu -->
    <nav class="bg-white shadow-lg rounded-full px-6 py-3 mb-6 flex justify-center space-x-4">
        <a href="../index.html" class="text-gray-700 font-semibold hover:text-blue-600 transition-colors duration-200">
            Home
        </a>

        <div class="relative">
            <button id="lessons-button" class="text-gray-700 font-semibold hover:text-blue-600 transition-colors duration-200 focus:outline-none">
                Lessons
            </button>
            <div id="lessons-dropdown" class="absolute hidden bg-white shadow-lg rounded-xl p-2 w-48 mt-2 z-10">
                <a href="agriculture.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Agriculture</a>
                <a href="construction.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Construction</a>
                <a href="realEstate.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Real Estate</a>
                <a href="filmMaking.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Filmmaking</a>
                <a href="publicSafety.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Public Safety</a>
                <a href="surveyingMapping.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Surveying and Mapping</a>
                <a href="energyUtilities.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Energy and Utilities</a>
                <a href="logisticsDelivery.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Logistics and Delivery</a>
                <a href="journalism.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Journalism</a>
                <a href="environmentalConservation.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Environmental Conservation</a>
            </div>
        </div>
    </nav>

    <!-- Main container for the 3-column layout -->
    <div class="flex flex-col lg:flex-row gap-6">

        <!-- Column 1: Drone Information -->
        <div class="flex-1 bg-white shadow-lg rounded-xl p-6 max-h-[80vh] flex flex-col">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">The Role of Drones in Filmmaking</h2>
            <div class="h-full overflow-y-auto">
                <p class="mb-4">
                    Drones have completely changed the way movies and videos are made. They've given filmmakers a new set of eyes in the sky, allowing them to capture 
                    incredible footage that was once very difficult or expensive to get.
                </p>

                <h3 class="text-2xl font-bold text-gray-800 mb-4">How Drones Help</h3>
                <ul class="list-disc list-inside space-y-1 mb-4">
                    <li><strong class="font-medium">Amazing Aerial Shots:</strong> 
                        Drones are like a camera on an invisible string that can fly anywhere. They can capture breathtaking shots of landscapes, cities, and big action scenes from 
                        high above. Think of a scene where the camera smoothly flies over a forest and then swoops down to follow a person running. Before drones, this kind of shot 
                        would have required a helicopter, which is very expensive, loud, and not as flexible.</li>

                    <li><strong class="font-medium">Unique Angles and Perspectives:</strong> Drones can get into tight spaces and fly low to the ground, capturing angles that are 
                        impossible for a person or a big camera crane. They can fly through windows, weave between trees, or follow a car in a high-speed chase. This makes movies 
                        and commercials feel more exciting and dynamic.</li>

                    <li><strong class="font-medium">Saving Money and Time:</strong> Using a drone is much cheaper and faster than renting a helicopter or building a huge camera 
                        crane on a set. This means that even filmmakers with a smaller budget can now create stunning, professional-looking videos. A shot that might have taken a 
                        full day to set up with old equipment can now be done in just a few minutes with a drone.</li>

                    <li><strong class="font-medium">Filming Wild Animals:</strong> Drones allow nature documentarians to film wild animals without scaring them away. A drone can 
                        fly at a safe distance and capture incredible, close-up footage of animals in their natural habitats without disturbing them.</li>

                    <li><strong class="font-medium">Live Broadcasts:</strong> Drones are also used for live TV and news. At big events like concerts, sports games, or parades, a drone 
                        can fly high above the crowd to give viewers an amazing view of everything that's happening.</li>
                <h3 class="text-2xl font-bold text-gray-800 mb-4">The Drones Used</h3>
                <ul class="list-disc list-inside space-y-1 mb-4">
                    <li><strong class="font-medium">Gimbals for Smooth Shots:</strong> 
                        Drones used for filmmaking have a special part called a gimbal. This is a motorized mount that keeps the camera perfectly steady, even if the drone is moving 
                        around in the wind. This is why drone footage looks so smooth and not shaky.</li>

                    <li><strong class="font-medium">High-Quality Cameras:</strong> These drones are equipped with cameras that can record in very high definition, often in 4K or even 
                        higher! This gives the footage a sharp, professional look.</li>
                        <br>
                    <li><strong class="font-medium">Remote Control: </strong>The filmmaker controls the drone from the ground using a remote controller and a screen that shows them 
                        exactly what the drone's camera is seeing in real-time. This allows them to carefully frame each shot just right.</li>
                    
                </ul>
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Challenge: Capture the Shots</h2>
                <p class="mb-4">
                    Your mission is to save time by quickly flying to each location and filming each the building. Just make sure not to crash into it!
                </p>
                <p>
                    Your Goal: Guide the drone to the x spots where the director wants you to capture the shot. Then fly to the "H" landing square to download the footage. Each square will 
                    give you one survey point. Once you have surveyed all spots then land at the target location. Some obstacles you can fly over if they are under 300 feet.
                </p>
            </div>
            
        </div>

        <!-- Column 2: Blockly Workspace -->
        <div class="flex-1 bg-white shadow-lg rounded-xl p-6 flex flex-col items-center justify-center">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Code Your Drone</h2>
            <div id="blocklyContainer" class="w-full">
                <div id="blocklyDiv"></div> <!-- Add blocklyDiv here -->
            </div>
            <div class="flex space-x-4 mt-4">
                <button id="runButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                    Run
                </button>
                <button id="resetButton" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                    Reset
                </button>
            </div>
        </div>

        <!-- Column 3: Drone Simulation -->
        <div class="flex-1 bg-white shadow-lg rounded-xl p-6 flex flex-col items-center">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Drone Simulation</h2>
            <!-- Drone media + Altitude/Status side-by-side -->
            <div class="flex items-start w-full max-w-full mb-4 gap-4">
                <div id="droneMediaWrapper" class="rounded-xl shadow-sm">
                    <img src="../images/drone.png" alt="Drone" class="rounded-xl shadow-sm w-[150px] h-[100px]">
                </div>
                <div class="bg-gray-100 rounded-lg p-3 w-full max-w-xs">
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-600">Altitude:</span>
                        <span id="altitudeDisplay" class="text-lg font-bold text-blue-600">0 units</span>
                    </div>
                    <div class="flex items-center justify-between mt-1">
                        <span class="text-sm font-medium text-gray-600">Status:</span>
                        <span id="flightStatus" class="text-sm font-semibold text-red-600">Landed</span>
                    </div>
                </div>
            </div>

            <!-- Birds-eye view simulation with side gauge -->
            <div id="simulationContainer" class="w-full">
                <div class="flex w-full h-full items-stretch">
                    <div class="flex-1">
                        <canvas id="simulationCanvas" class="rounded-xl border border-gray-300 w-full h-full"></canvas>
                    </div>
                    <div class="w-20 ml-3 rounded-xl border border-gray-200 overflow-hidden">
                        <canvas id="altitudeGauge" class="w-full h-full"></canvas>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Blockly scripts -->
    <script src="https://unpkg.com/blockly@9.0.0/blockly.min.js"></script>

    <!-- JavaScript logic -->
    <script src="../index.js"></script>
    <script src="filmMaking.js"></script>

    <script>
    document.getElementById('lessons-button').addEventListener('click', function() {
        document.getElementById('lessons-dropdown').classList.toggle('hidden');
    });

    // Optional: Close the dropdown if the user clicks anywhere else
    document.addEventListener('click', function(event) {
        const dropdown = document.getElementById('lessons-dropdown');
        const button = document.getElementById('lessons-button');

        if (!dropdown.contains(event.target) && !button.contains(event.target)) {
            dropdown.classList.add('hidden');
        }
    });
    </script>
</body>
</html>
