<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drone Education App</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .blocklyFlyoutScrollbar.blocklyScrollbarVertical {
            display: none;
        }

        /* For WebKit browsers (Chrome, Safari) */
        .blocklyFlyoutScrollbar.blocklyScrollbarVertical::-webkit-scrollbar {
            display: none;
        }
        /* Custom styles to ensure Blockly and canvas fill their containers */
        #blocklyDiv, #simulationCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        #blocklyContainer, #simulationContainer {
            height: 60vh; /* Adjust height for better fit */
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            overflow: hidden;
            background-color: #f9fafb;
        }
        /* --- FIX: Create a new stacking context for Blockly --- */
        #blocklyContainer {
            position: relative;
            z-index: 0;
        }
        .scrollable-content {
            height: 100%;
            overflow-y: auto;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans p-6">

    <!-- Navigation Menu -->
    <nav class="bg-white shadow-lg rounded-full px-6 py-3 mb-6 flex justify-center space-x-4">
        <a href="../index.html" class="text-gray-700 font-semibold hover:text-blue-600 transition-colors duration-200">
            Home
        </a>

        <div class="relative">
            <button id="lessons-button" class="text-gray-700 font-semibold hover:text-blue-600 transition-colors duration-200 focus:outline-none">
                Lessons
            </button>
            <div id="lessons-dropdown" class="absolute hidden bg-white shadow-lg rounded-xl p-2 w-48 mt-2 z-10">
                <a href="agriculture.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Agriculture</a>
                <a href="construction.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Construction</a>
                <a href="realEstate.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Real Estate</a>
                <a href="filmMaking.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Filmmaking</a>
                <a href="publicSafety.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Public Safety</a>
                <a href="surveyingMapping.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Surveying and Mapping</a>
                <a href="energyUtilities.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Energy and Utilities</a>
                <a href="logisticsDelivery.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Logistics and Delivery</a>
                <a href="journalism.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Journalism</a>
                <a href="environmentalConservation.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Environmental Conservation</a>
            </div>
        </div>
    </nav>

    <!-- Main container for the 3-column layout -->
    <div class="flex flex-col lg:flex-row gap-6">

        <!-- Column 1: Drone Information -->
        <div class="flex-1 bg-white shadow-lg rounded-xl p-6 max-h-[80vh] flex flex-col">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">The Role of Drones in Environmental Conservation</h2>
            <div class="h-full overflow-y-auto">
                <p class="mb-4">
                    Drones are a fantastic tool for environmental conservation because they can do things that are difficult or even dangerous for people to do. 
                    They help scientists and park rangers protect animals and their homes.
                </p>

                <h3 class="text-2xl font-bold text-gray-800 mb-4">How Drones Help</h3>
                <ul class="list-disc list-inside space-y-1 mb-4">
                    <li><strong class="font-medium">Counting Animals:</strong> 
                        It's hard to count every animal in a large area, like an entire forest or savanna. Drones can fly high above the ground and use special cameras to take pictures. 
                        Later, scientists can look at the photos to count the animals, which helps them know if a species is healthy or in danger. They can even use thermal cameras to find 
                        animals at night by sensing their body heat! </li>

                    <li><strong class="font-medium">Tracking Poachers:</strong> Drones are great for keeping animals like rhinos and elephants safe from poachers (people who hunt illegally). 
                        They can fly silently and use cameras to spot poachers from far away, even at night. This helps park rangers get to the area quickly and stop the illegal activity.</li>
            
                    <li><strong class="font-medium">Studying Habitats:</strong> Drones can take pictures of a large area all at once. Scientists use these pictures to create maps of habitats, 
                        like forests or wetlands. These maps show if a habitat is healthy, if trees are being cut down, or if an area is being polluted. This helps them decide what to do to 
                        protect the environment.</li>
                    <li><strong class="font-medium">Replanting Trees:</strong> Drones can be used to replant trees in areas that have been damaged by wildfires or logging. They can drop 
                        "seed balls" from the air that contain seeds, fertilizer, and other nutrients. This is much faster and more efficient than planting by hand, especially in remote or 
                        difficult-to-reach places.</li>

                <h2 class="text-2xl font-bold text-gray-800 mb-4">Challenge: Find the animals</h2>
                <p class="mb-4">
                    Your mission is to find all of the animals on the map before the poachers do.
                </p>
                <p>
                    Your Goal: Guide the drone to hover above each of the yellow spots where an animal is hiding. Make sure to avoid the poachers, black spots, and then land on the green
                    square to report which animals you found.
                </p>
            </div>
            
        </div>

        <!-- Column 2: Blockly Workspace -->
        <div class="flex-1 bg-white shadow-lg rounded-xl p-6 flex flex-col items-center justify-center">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Code Your Drone</h2>
            <div id="blocklyContainer" class="w-full">
                <div id="blocklyDiv"></div> <!-- Add blocklyDiv here -->
            </div>
            <div class="flex space-x-4 mt-4">
                <button id="runButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                    Run
                </button>
                <button id="resetButton" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                    Reset
                </button>
            </div>
        </div>

        <!-- Column 3: Drone Simulation -->
        <div class="flex-1 bg-white shadow-lg rounded-xl p-6 flex flex-col items-center">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Drone Simulation</h2>
            <!-- Replaced SVG with an image -->
            <img src="../images/drone.png" alt="Drone" class="rounded-xl mb-4 shadow-sm w-[200px] h-[150px]">

            <!-- Birds-eye view simulation -->
            <div id="simulationContainer" class="w-full">
                <canvas id="simulationCanvas" class="rounded-xl border border-gray-300"></canvas>
            </div>
        </div>

    </div>

    <!-- Blockly scripts -->
    <script src="https://unpkg.com/blockly@9.0.0/blockly.min.js"></script>

    <!-- JavaScript logic -->
    <script src="../index.js"></script>
    <script src="environmentalConservation.js"></script>

    <script>
    document.getElementById('lessons-button').addEventListener('click', function() {
        document.getElementById('lessons-dropdown').classList.toggle('hidden');
    });

    // Optional: Close the dropdown if the user clicks anywhere else
    document.addEventListener('click', function(event) {
        const dropdown = document.getElementById('lessons-dropdown');
        const button = document.getElementById('lessons-button');

        if (!dropdown.contains(event.target) && !button.contains(event.target)) {
            dropdown.classList.add('hidden');
        }
    });
    </script>
</body>
</html>
