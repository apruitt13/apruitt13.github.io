<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drone Education App</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .blocklyFlyoutScrollbar.blocklyScrollbarVertical {
            display: none;
        }

        /* For WebKit browsers (Chrome, Safari) */
        .blocklyFlyoutScrollbar.blocklyScrollbarVertical::-webkit-scrollbar {
            display: none;
        }
        /* Custom styles to ensure Blockly and canvas fill their containers */
        #blocklyDiv, #simulationCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        #blocklyContainer, #simulationContainer {
            height: 60vh; /* Adjust height for better fit */
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            overflow: hidden;
            background-color: #f9fafb;
        }
        /* --- FIX: Create a new stacking context for Blockly --- */
        #blocklyContainer {
            position: relative;
            z-index: 0;
        }
        .scrollable-content {
            height: 100%;
            overflow-y: auto;
        }
        /* Force smaller drone media size */
        #droneMediaWrapper img,
        #droneMediaWrapper video {
            width: 150px !important;
            height: 100px !important;
            object-fit: contain;
            display: block;
        }
        #droneMediaWrapper video {
            margin-bottom: 0 !important;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans p-6">

    <!-- Navigation Menu -->
    <nav class="bg-white shadow-lg rounded-full px-6 py-3 mb-6 flex justify-center space-x-4">
        <a href="../index.html" class="text-gray-700 font-semibold hover:text-blue-600 transition-colors duration-200">
            Home
        </a>

        <div class="relative">
            <button id="lessons-button" class="text-gray-700 font-semibold hover:text-blue-600 transition-colors duration-200 focus:outline-none">
                Lessons
            </button>
            <div id="lessons-dropdown" class="absolute hidden bg-white shadow-lg rounded-xl p-2 w-48 mt-2 z-10">
                <a href="agriculture.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Agriculture</a>
                <a href="construction.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Construction</a>
                <a href="realEstate.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Real Estate</a>
                <a href="filmMaking.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Filmmaking</a>
                <a href="publicSafety.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Public Safety</a>
                <a href="surveyingMapping.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Surveying and Mapping</a>
                <a href="energyUtilities.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Energy and Utilities</a>
                <a href="logisticsDelivery.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Logistics and Delivery</a>
                <a href="journalism.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Journalism</a>
                <a href="environmentalConservation.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg">Environmental Conservation</a>
            </div>
        </div>
    </nav>

    <!-- Main container for the 3-column layout -->
    <div class="flex flex-col lg:flex-row gap-6">

        <!-- Column 1: Drone Information -->
        <div class="flex-1 bg-white shadow-lg rounded-xl p-6 max-h-[80vh] flex flex-col">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">The Role of Drones in Logistics and Delivery</h2>
            <div class="h-full overflow-y-auto">
                <p class="mb-4">
                    In logistics and delivery, the use of drone technology is rapidly evolving, offering a modern solution to long-standing challenges. Drones, 
                    or Unmanned Aerial Vehicles (UAVs), are proving to be particularly effective for "last-mile" deliveries, which is the final leg of a package's journey from a 
                    transportation hub to the customer's doorstep.
                </p>

                <h3 class="text-2xl font-bold text-gray-800 mb-4">Key Applications</h3>
                <ul class="list-disc list-inside space-y-1 mb-4">
                    <li><strong class="font-medium">Medical Deliveries:</strong> 
                        Drones are used to transport urgent medical supplies, such as vaccines, blood samples, and lab specimens, to hospitals and clinics in remote or hard-to-reach areas, 
                        especially during emergencies. Zipline, for example, is a company that has made thousands of medical deliveries, significantly reducing the time it takes to get 
                        life-saving supplies where they are needed.</li>

                    <li><strong class="font-medium">E-commerce and Retail:</strong> Companies like Amazon (with its Prime Air service) and Walmart are testing drone delivery for small, 
                        lightweight consumer goods. This application is designed to provide customers with an even faster delivery option, in some cases promising deliveries in under 30 minutes.</li>

                    <li><strong class="font-medium">Food and Groceries: </strong> WSeveral companies, including Flytrex and Manna, have launched drone delivery services for prepared food and 
                        groceries, allowing customers to receive their orders quickly and without traffic delays.</li>
                <h3 class="text-2xl font-bold text-gray-800 mb-4">Benefits of Drone Delivery</h3>
                <ul class="list-disc list-inside space-y-1 mb-4">
                    <li><strong class="font-medium">Speed and Efficiency: </strong> 
                        Drones can bypass road traffic and take the most direct route to a destination, significantly reducing delivery times. This is especially beneficial for 
                        time-sensitive items.</li>

                    <li><strong class="font-medium">Reduced Costs:</strong> While the initial investment in drone technology and infrastructure is high, the long-term operational costs 
                        can be lower. Drones require less maintenance and eliminate the need for fuel and labor associated with traditional delivery vehicles.</li>

                    <li><strong class="font-medium">Sustainability: </strong> Drones are typically battery-powered, resulting in zero emissions during flight. This offers a more 
                        environmentally friendly alternative to gasoline-powered delivery trucks, contributing to a reduction in traffic congestion and carbon footprints.</li>

                    <li><strong class="font-medium">Enhanced Accessibility:</strong> Drones can access locations that are difficult for traditional vehicles to reach, such as islands, 
                        mountainous regions, or areas affected by natural disasters.</li>
                </ul>
                <h3 class="text-2xl font-bold text-gray-800 mb-4">Challenges and Future Outlook</h3>
                <p class="mb-4">
                    Despite the benefits, drone delivery faces a number of hurdles. Regulatory frameworks are still developing, and issues like air traffic management, privacy concerns 
                    from the public, and noise pollution need to be addressed. Technological limitations also exist, including a limited flight range due to battery life and a small 
                    payload capacity, which restricts the size and weight of deliverable packages.
                    <br>
                    <br>
                    However, as technology advances and regulations adapt, drone delivery is expected to become an increasingly common part of the logistics landscape. The future of the 
                    industry will likely see a hybrid model where drones work in tandem with traditional delivery methods to create a more efficient, sustainable, and responsive supply chain.
                </p>
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Challenge: Make the deliveries</h2>
                <p class="mb-4">
                    Your mission is to successfully deliver all of the packages to the delivery sites.
                </p>
                <p>
                    Your Goal: Guide the drones to all of the "x" delivery sites. Avoid the obstacles along the way and make sure to deliver as quickly as possible. Each square will give you one 
                    survey point. Once you have surveyed all spots then land at the target location. Some obstacles you can fly over if they are under 300 feet.
                </p>
            </div>
            
        </div>

        <!-- Column 2: Blockly Workspace -->
        <div class="flex-1 bg-white shadow-lg rounded-xl p-6 flex flex-col items-center justify-center">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Code Your Drone</h2>
            <div id="blocklyContainer" class="w-full">
                <div id="blocklyDiv"></div> <!-- Add blocklyDiv here -->
            </div>
            <div class="flex space-x-4 mt-4">
                <button id="runButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                    Run
                </button>
                <button id="resetButton" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                    Reset
                </button>
            </div>
        </div>

        <!-- Column 3: Drone Simulation -->
        <div class="flex-1 bg-white shadow-lg rounded-xl p-6 flex flex-col items-center">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Drone Simulation</h2>
            <!-- Drone media + Altitude/Status side-by-side -->
            <div class="flex items-start w-full max-w-full mb-4 gap-4">
                <div id="droneMediaWrapper" class="rounded-xl shadow-sm">
                    <img src="../images/drone.png" alt="Drone" class="rounded-xl shadow-sm w-[150px] h-[100px]">
                </div>
                <div class="bg-gray-100 rounded-lg p-3 w-full max-w-xs">
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-600">Altitude:</span>
                        <span id="altitudeDisplay" class="text-lg font-bold text-blue-600">0 units</span>
                    </div>
                    <div class="flex items-center justify-between mt-1">
                        <span class="text-sm font-medium text-gray-600">Status:</span>
                        <span id="flightStatus" class="text-sm font-semibold text-red-600">Landed</span>
                    </div>
                </div>
            </div>

            <!-- Birds-eye view simulation with side gauge -->
            <div id="simulationContainer" class="w-full">
                <div class="flex w-full h-full items-stretch">
                    <div class="flex-1">
                        <canvas id="simulationCanvas" class="rounded-xl border border-gray-300 w-full h-full"></canvas>
                    </div>
                    <div class="w-20 ml-3 rounded-xl border border-gray-200 overflow-hidden">
                        <canvas id="altitudeGauge" class="w-full h-full"></canvas>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Blockly scripts -->
    <script src="https://unpkg.com/blockly@9.0.0/blockly.min.js"></script>

    <!-- JavaScript logic -->
    <script src="../index.js"></script>
    <script src="logisticsDelivery.js"></script>

    <script>
    document.getElementById('lessons-button').addEventListener('click', function() {
        document.getElementById('lessons-dropdown').classList.toggle('hidden');
    });

    // Optional: Close the dropdown if the user clicks anywhere else
    document.addEventListener('click', function(event) {
        const dropdown = document.getElementById('lessons-dropdown');
        const button = document.getElementById('lessons-button');

        if (!dropdown.contains(event.target) && !button.contains(event.target)) {
            dropdown.classList.add('hidden');
        }
    });
    </script>
</body>
</html>
